"use strict";(self.webpackChunkfinalproject=self.webpackChunkfinalproject||[]).push([[323],{74323:function(n,i,l){l.r(i);var e=l(42982),t=l(37762),r=l(70885),d=l(47313),s=l(58467),o=l(2135),c=l(79313),h=l(12417),_=l(40526),a=l(27998),u=l(22370),E=l(91161),x=l(85554),m=l(9212),j=l(46417),N=function(n){return console.log("flow loaded:",n)},S=function(){var n=(0,d.useState)([]),i=(0,r.Z)(n,2),l=i[0],S=i[1],T=(0,d.useState)(null),p=(0,r.Z)(T,2),f=p[0],A=p[1],I=(0,d.useState)(!1),g=(0,r.Z)(I,2),v=g[0],P=g[1],M=(0,c.Rr)([]),D=(0,r.Z)(M,3),G=D[0],b=D[1],L=D[2],R=(0,c.ll)([]),C=(0,r.Z)(R,3),F=C[0],K=C[1],w=C[2],U=(0,x.I0)(),k=(0,s.UO)().id,O=(0,x.v9)((function(n){return n.stage})).allStages;(0,d.useEffect)((function(){U((0,m.yN)(k)).then((function(n){S(n.payload.data)}))}),[U]);var y=function(n){P(!v),U((0,m.IY)(n)).then((function(n){A(n.payload)}))},Z=[],Y=[];(0,d.useMemo)((function(){var n=[],i=[],l=O;if(l.length>0){l.map((function(l,e){if(l.linkStages.length>0){var r,d=(0,t.Z)(l.linkStages);try{for(d.s();!(r=d.n()).done;){var s=r.value;n.push(s.STG_ID_PK_LINK)}}catch(o){d.e(o)}finally{d.f()}}l.PARENT_ID>0&&i.push(l.PARENT_ID)})),i=(0,e.Z)(new Set(i));var r,d=(0,t.Z)(l);try{var s=function(){var e=r.value,d=n.find((function(n){return e.STG_ID_PK==n})),s=l.find((function(n){return n.PARENT_ID==e.STG_ID_PK}));if(Z.push({id:e.linkStages.length>0?(e.STG_ID_PK+33).toString():e.STG_ID_PK.toString(),type:e.PARENT_ID>0&&d?"default":s||d?"input":"output",data:{label:(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("strong",{onClick:function(){return y(e.STG_ID_PK)},children:[e.STG_NUMBER," || ",e.STG_RESULT_NAME," || ",e.STG_TYPE_NAME," || ",e.OFC_NAME," || ",e.STG_KIND_NAME]})})},height:40,width:150,position:e.PARENT_ID<0||!e.PARENT_ID&&0==e.linkStages.length?{x:i.indexOf(e.STG_ID_PK)>=0?window.innerWidth/i.length*(i.indexOf(e.STG_ID_PK)+1):window.innerWidth/2+180*l.indexOf(e),y:i.indexOf(e.STG_ID_PK)>=0?80:0}:e.PARENT_ID>0?{x:window.innerWidth/i.length*(i.indexOf(e.PARENT_ID)+1),y:100+85*l.indexOf(e)}:{x:i.length>0?window.innerWidth/i.length+window.innerWidth/i.length/2:window.innerWidth/3+180*(l.indexOf(e)-1),y:i.length>0?window.innerHeight/2-70*l.indexOf(e)+400:!d&&e.linkStages.length>0?450:d&&e.linkStages.length>0?550:e.PARENT_ID<0||!e.PARENT_ID?250:400}}),e.PARENT_ID>0&&Y.push({id:"e".concat(e.PARENT_ID,"-").concat(e.STG_ID_PK),source:e.PARENT_ID.toString(),target:e.STG_ID_PK.toString(),type:"straight",markerEnd:{type:h.M.ArrowClosed}}),e.linkStages.length>0){var o,c=(0,t.Z)(e.linkStages);try{for(c.s();!(o=c.n()).done;){var _=o.value;Y.push({id:e.STG_ID_PK==d?"e".concat(_.STG_ID_PK_LINK+33,"-").concat(_.STG_ID_PK+33):"e".concat(_.STG_ID_PK_LINK,"-").concat(_.STG_ID_PK+33),source:_.STG_ID_PK_LINK.toString(),target:(_.STG_ID_PK+33).toString(),type:"straight",markerEnd:{type:h.M.Arrow},style:{stroke:"#1e42a0"}})}}catch(a){c.e(a)}finally{c.f()}}K(Y),b(Z)};for(d.s();!(r=d.n()).done;)s()}catch(o){d.e(o)}finally{d.f()}}}),[l.length,null===O||void 0===O?void 0:O.length]);var B,W=function(){P(!1),A(null)};B=function(){var n,i,l;return(0,j.jsxs)(a.Tk,{visible:v,onClose:function(){return W()},children:[(0,j.jsx)(a.p0,{children:(0,j.jsxs)(a.fl,{children:[(0,j.jsx)(u.Z,{style:{height:"20px"},icon:E.H,customClassName:"nav-icon"}),f?(0,j.jsxs)("span",{children:["\u0645\u0644\u0641 \u0631\u0642\u0645 ",null===f||void 0===f?void 0:f.STG_NUMBER]}):null]})}),(0,j.jsx)(a.sD,{children:(0,j.jsxs)(a.rb,{children:[(0,j.jsx)(a.b7,{md:"6",children:(0,j.jsxs)(a.rb,{children:[(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:"\u0645\u0642\u064a\u0645\u064a \u0627\u0644\u0642\u0636\u064a\u0647"}),(0,j.jsx)("p",{children:f.FIL_SOURCE_NAME?f.FIL_SOURCE_NAME:"\u0644\u0627 \u064a\u0648\u062c\u062f"})]}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:"\u0627\u0644\u0642\u0636\u064a\u0647 \u0627\u0644\u0625\u0633\u0627\u0633\u064a\u0647"}),(0,j.jsx)("p",{children:null!==f&&void 0!==f&&f.PARENT_NAME?null===f||void 0===f?void 0:f.PARENT_NAME:"\u0644\u0627 \u064a\u0648\u062c\u062f"})]}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:"\u0642\u0636\u0627\u064a\u0627 \u0627\u0644\u0625\u0631\u062a\u0628\u0627\u0637 "}),f?null===f||void 0===f||null===(n=f.LINKS)||void 0===n?void 0:n.map((function(n,i){return(0,j.jsx)(o.rU,{to:"/link.STG_ID_PK",children:n.STG_NUMBER?n.STG_NUMBER:"\u0644\u0627 \u064a\u0648\u062c\u062f"},i)})):null]}),(0,j.jsx)(a.b7,{md:12,children:(0,j.jsxs)(a.rb,{children:[(0,j.jsxs)(a.b7,{xs:6,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:" \u0631\u0642\u0645 \u0627\u0644\u0642\u0636\u064a\u0647"}),(0,j.jsx)("p",{children:null!==f&&void 0!==f&&f.CAS_NUMBER?null===f||void 0===f?void 0:f.CAS_NUMBER:"\u0644\u0627 \u064a\u0648\u062c\u062f"})]}),(0,j.jsxs)(a.b7,{xs:6,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:" \u0627\u0644\u0633\u0646\u0647"}),(0,j.jsx)("p",{children:null!==f&&void 0!==f&&f.STG_YEAR?null===f||void 0===f?void 0:f.STG_YEAR:"\u0644\u0627 \u064a\u0648\u062c\u062f"})]})]})}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:" \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0633\u062c\u064a\u0644"}),(0,j.jsx)("p",{children:null!==f&&void 0!==f&&f.CAS_OPEN_DATE?new Intl.DateTimeFormat("en-US").format(new Date(f.CAS_OPEN_DATE)):null})]}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:" \u0627\u0644\u0645\u0631\u062d\u0644\u0647"}),(0,j.jsx)("p",{children:f.STG_KIND_NAME?f.STG_KIND_NAME:"\u0644\u0627 \u064a\u0648\u062c\u062f"})]}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:"\u0627\u0644\u062f\u0627\u0626\u0631\u0647"}),(0,j.jsx)("p",{children:f.OFC_NAME?f.OFC_NAME:"\u0644\u0627 \u064a\u0648\u062c\u062f"})]}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:"\u0631\u0642\u0645 \u0627\u0644\u0628\u0644\u0627\u063a"}),(0,j.jsx)("p",{children:f.INR_NUMBER?f.INR_NUMBER:"\u0644\u0627 \u064a\u0648\u062c\u062f"})]}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:"\u0646\u0648\u0639 \u0627\u0644\u0642\u0636\u064a\u0647"}),(0,j.jsx)("p",{children:f.STG_TYPE_NAME?f.STG_TYPE_NAME:"\u0644\u0627 \u064a\u0648\u062c\u062f"})]}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:" \u0627\u0644\u0645\u062d\u0643\u0645\u0647"}),(0,j.jsx)("p",{children:f.COU_NAME?f.COU_NAME:"\u0644\u0627 \u064a\u0648\u062c\u062f"})]}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:" \u0641\u0631\u0639 \u0627\u0644\u0645\u062d\u0643\u0645\u0647"}),(0,j.jsx)("p",{children:f.COU_NAME?f.COU_NAME:"\u0644\u0627 \u064a\u0648\u062c\u062f"})]}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:" \u0627\u0644\u0642\u0627\u0636\u064a"}),(0,j.jsx)("p",{children:f.STG_JUDGE_NAME?f.STG_JUDGE_NAME:"\u0644\u0627 \u064a\u0648\u062c\u062f"})]}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:" \u0645\u062a\u0627\u0628\u0639 \u0627\u0644\u0642\u0636\u064a\u0647"}),(0,j.jsx)("p",{children:f.EMP_NAME?f.EMP_NAME:"\u0644\u0627 \u064a\u0648\u062c\u062f"})]}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:" \u062d\u0627\u0644\u0647 \u0627\u0644\u0642\u0636\u064a\u0647"}),(0,j.jsx)("p",{children:f.FIL_STATUS_NAME?f.FIL_STATUS_NAME:"\u0644\u0627 \u064a\u0648\u062c\u062f"})]}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:" \u0646\u062a\u064a\u062c\u0647 \u0627\u0644\u0642\u0636\u064a\u0647"}),(0,j.jsx)("p",{children:f.STG_RESULT_NAME?f.STG_RESULT_NAME:"\u0644\u0627 \u064a\u0648\u062c\u062f"})]})]})}),(0,j.jsx)(a.b7,{md:"6",children:(0,j.jsxs)(a.rb,{children:[(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:"\u0627\u0644\u0645\u0648\u0643\u0644\u0648\u0646"}),f?(0,j.jsx)("select",{className:"mb-2 d-block",children:null===f||void 0===f||null===(i=f.clients)||void 0===i?void 0:i.map((function(n,i){return(0,j.jsx)("option",{children:"\u0645\u0648\u0643\u0644"==n.CLI_TYPE_NAME&&n.CLI_NAME},i)}))}):null]}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:"\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u062b\u0627\u0646\u0649"}),null!==f&&void 0!==f&&f.clients?(0,j.jsx)("select",{className:"mb-2 d-block",children:null===f||void 0===f||null===(l=f.clients)||void 0===l?void 0:l.map((function(n,i){return(0,j.jsx)("option",{children:"\u062e\u0635\u0645"==(null===n||void 0===n?void 0:n.CLI_TYPE_NAME)&&(null===n||void 0===n?void 0:n.CLI_NAME)},i)}))}):null]}),(0,j.jsxs)(a.b7,{md:12,children:[(0,j.jsx)(a.L8,{htmlFor:"inputEmail4",children:" \u0627\u0644\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),f?(0,j.jsx)("p",{children:f.STG_NOTES?f.STG_NOTES:"null"}):null]})]})})]})}),(0,j.jsx)(a.Ym,{children:(0,j.jsx)(a.u5,{color:"danger",className:"btn-modal-close",onClick:function(){return W()},children:"\u0625\u063a\u0644\u0627\u0642"})})]})};return(0,j.jsxs)("div",{className:"tree",children:[(0,j.jsx)(c.ZP,{nodes:G,edges:F,elements:[G,F],onNodesChange:L,onEdgesChange:w,onConnect:function(n){return K((function(i){return(0,h.c)(n,i)}))},onInit:N,fitView:!0,attributionPosition:"top-right",onNodeClick:function(n,i){y(parseInt(i.id))},children:(0,j.jsx)(_.Z,{color:"#999",gap:16})}),f?B():null]})};i.default=d.memo(S)}}]);